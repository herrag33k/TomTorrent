<?

$smilies = array(
  ":-)" => "smile1.gif",
  ";-)" => "wink.gif",
  ":-D" => "grin.gif",
  ":-P" => "tongue.gif",
  ":-(" => "sad.gif",
  ":'-(" => "cry.gif",
  ":-|" => "noexpression.gif",
  ":-/" => "confused.gif",
  ":-O" => "ohmy.gif",
  ":o)" => "clown.gif",
  "8-)" => "cool1.gif",
  "|-)" => "sleeping.gif",
  ":innocent:" => "innocent.gif",
  ":whistle:" => "whistle.gif",
  ":unsure:" => "unsure.gif",
  ":closedeyes:" => "closedeyes.gif",
  ":angry:" => "angry.gif",
  ":smile:" => "smile2.gif",
  ":lol:" => "laugh.gif",
  ":cool:" => "cool2.gif",
  ":fun:" => "fun.gif",
  ":thumbsup:" => "thumbsup.gif",
  ":thumbsdown:" => "thumbsdown.gif",
  ":blush:" => "blush.gif",
  ":weep:" => "weep.gif",
  ":unsure:" => "unsure.gif",
  ":yes:" => "yes.gif",
  ":no:" => "no.gif",
  ":love:" => "love.gif",
  ":?:" => "question.gif",
  ":!:" => "excl.gif",
  ":idea:" => "idea.gif",
  ":arrow:" => "arrow.gif",
  ":hmm:" => "hmm.gif",
  ":hmmm:" => "hmmm.gif",
  ":huh:" => "huh.gif",
  ":w00t:" => "w00t.gif",
  ":geek:" => "geek.gif",
  ":look:" => "look.gif",
  ":rolleyes:" => "rolleyes.gif",
  ":kiss:" => "kiss.gif",
  ":shifty:" => "shifty.gif",
  ":blink:" => "blink.gif",
  ":smartass:" => "smartass.gif",
  ":sick:" => "sick.gif",
  ":crazy:" => "crazy.gif",
  ":wacko:" => "wacko.gif",
  ":alien:" => "alien.gif",
  ":wizard:" => "wizard.gif",
  ":wave:" => "wave.gif",
  ":wavecry:" => "wavecry.gif",
  ":baby:" => "baby.gif",
  ":ras:" => "ras.gif",
  ":sly:" => "sly.gif",
  ":devil:" => "devil.gif",
  ":evil:" => "evil.gif",
  ":evilmad:" => "evilmad.gif",
  ":yucky:" => "yucky.gif",
  ":nugget:" => "nugget.gif",
  ":sneaky:" => "sneaky.gif",
  ":smart:" => "smart.gif",
  ":shutup:" => "shutup.gif",
  ":shutup2:" => "shutup2.gif",
  ":yikes:" => "yikes.gif",
  ":flowers:" => "flowers.gif",
  ":wub:" => "wub.gif",
  ":osama:" => "osama.gif",
  ":saddam:" => "saddam.gif",
  ":santa:" => "santa.gif",
  ":indian:" => "indian.gif",
  ":guns:" => "guns.gif",
  ":crockett:" => "crockett.gif",
  ":zorro:" => "zorro.gif",
  ":snap:" => "snap.gif",
  ":beer:" => "beer.gif",
  ":beer2:" => "beer2.gif",
  ":drunk:" => "drunk.gif",
  ":mama:" => "mama.gif",
  ":pepsi:" => "pepsi.gif",
  ":medieval:" => "medieval.gif",
  ":rambo:" => "rambo.gif",
  ":ninja:" => "ninja.gif",
  ":hannibal:" => "hannibal.gif",
  ":party:" => "party.gif",
  ":snorkle:" => "snorkle.gif",
  ":evo:" => "evo.gif",
  ":king:" => "king.gif",
  ":chef:" => "chef.gif",
  ":mario:" => "mario.gif",
  ":pope:" => "pope.gif",
  ":fez:" => "fez.gif",
  ":cap:" => "cap.gif",
  ":cowboy:" => "cowboy.gif",
  ":pirate:" => "pirate.gif",
  ":rock:" => "rock.gif",
  ":cigar:" => "cigar.gif",
  ":icecream:" => "icecream.gif",
  ":oldtimer:" => "oldtimer.gif",
  ":wolverine:" => "wolverine.gif",
  ":strongbench:" => "strongbench.gif",
  ":weakbench:" => "weakbench.gif",
  ":bike:" => "bike.gif",
  ":music:" => "music.gif",
  ":book:" => "book.gif",
  ":fish:" => "fish.gif",
  ":stupid:" => "stupid.gif",
  ":dots:" => "dots.gif",
  ":axe:" => "axe.gif",
  ":hooray:" => "hooray.gif",
  ":yay:" => "yay.gif",
  ":cake:" => "cake.gif",
  ":hbd:" => "hbd.gif",
  ":hi:" => "hi.gif",
  ":offtopic:" => "offtopic.gif",
  ":band:" => "band.gif",
  ":hump:" => "hump.gif",
  ":punk:" => "punk.gif",
  ":bounce:" => "bounce.gif",
  ":mbounce:" => "mbounce.gif",
  ":group:" => "group.gif",
  ":console:" => "console.gif",
  ":smurf:" => "smurf.gif",
  ":soldiers:" => "soldiers.gif",
  ":spidey:" => "spidey.gif",
  ":smurf:" => "smurf.gif",
  ":rant:" => "rant.gif",
  ":pimp:" => "pimp.gif",
  ":nuke:" => "nuke.gif",
  ":judge:" => "judge.gif",
  ":jacko:" => "jacko.gif",
  ":ike:" => "ike.gif",
  ":greedy:" => "greedy.gif",
  ":dumbells:" => "dumbells.gif",
  ":clover:" => "clover.gif",
  ":shit:" => "shit.gif",
  ":thankyou:" => "thankyou.gif",
  ":horse:" => "horse.gif",
  ":box:" => "box.gif",
  ":boxing:" => "boxing.gif",
  ":gathering:" => "gathering.gif",
  ":hang:" => "hang.gif",
  ":chair:" => "chair.gif",
  ":spam:" => "spam.gif",
  ":bandana:" => "bandana.gif",
  ":construction:" => "construction.gif",
  ":oops:" => "oops.gif",
  ":rip:" => "rip.gif",
  ":sheep:" => "sheep.gif",
  ":tease:" => "tease.gif",
  ":spider:" => "spider.gif",
  ":shoot:" => "shoot.gif",
  ":shoot2:" => "shoot2.gif",
  ":police:" => "police.gif",
  ":lovers:" => "lovers.gif",
  ":kissing:" => "kissing.gif",
  ":kissing2:" => "kissing2.gif",
  ":jump:" => "jump.gif",
  ":happy2:" => "happy2.gif",
  ":clap:" => "clap.gif",
  ":clap2:" => "clap2.gif",
  ":chop:" => "chop.gif",
  ":lttd:" => "lttd.gif",
  ":whip:" => "whip.gif",
  ":yawn:" => "yawn.gif",
  ":bow:" => "bow.gif",
  ":slap:" => "slap.gif",
  ":wall:" => "wall.gif",
  ":please:" => "please.gif",
  ":sorry:" => "sorry.gif",
	":dawgie:" => "dawgie.gif",
	":weirdo:" => "weirdo.gif",
	":cylon:" => "cylon.gif",
	":trampoline:" => "trampoline.gif",
	":rofl:" => "rofl.gif",
	":super:" => "super.gif",
	":detective:" => "detective.gif",
	":fishing:" => "fishing.gif",
  ":pirate2:" => "pirate2.gif",	
);

$privatesmilies = array(
  ":)" => "smile1.gif",
  ";)" => "wink.gif",
  ":D" => "grin.gif",
  ":P" => "tongue.gif",
  ":(" => "sad.gif",
  ":'(" => "cry.gif",
  ":|" => "noexpression.gif",
  // "8)" => "cool1.gif",   we don't want this as a smilie...
  ":Boozer:" => "alcoholic.gif",
  ":deadhorse:" => "deadhorse.gif",
  ":spank:" => "spank.gif",
  ":yoji:" => "yoji.gif",
  ":locked:" => "locked.gif",
  ":grrr:" => "angry.gif", 			// legacy
  "O:-" => "innocent.gif",			// legacy
  ":sleeping:" => "sleeping.gif",	// legacy
  "-_-" => "unsure.gif",			// legacy
  ":clown:" => "clown.gif",
  ":mml:" => "mml.gif",
  ":rtf:" => "rtf.gif",
  ":morepics:" => "morepics.gif",
);

// Set this to the line break character sequence of your system
$linebreak = "\r\n";

function get_row_count($table, $suffix = "")
{
  if ($suffix)
    $suffix = " $suffix";
  ($r = mysql_query("SELECT COUNT(*) FROM $table$suffix")) or sqlerr(__FILE__,__LINE__);
  ($a = mysql_fetch_row($r)) or die(mysql_error());
  return $a[0];
}

function stdmsg($heading, $text) {
	echo '<table class="main" width="750px" border="0" cellpadding="0" cellspacing="0"><tr><td class="embedded">'."\n";
	if (!empty($heading))
		echo '<h2>'.$heading.'</h2>'."\n";
	echo '<table width="100%" border="1" cellspacing="0" cellpadding="10"><tr><td class="text">'."\n";
	echo $text.'</td></tr></table></td></tr></table>'."\n";
}


function stderr($heading, $text)
{
	stdhead();
	stdmsg($heading, $text);
	stdfoot();
	die();
}

function sqlerr($file = '', $line = '') {
	global $CURUSER;
	$fp=fopen("/www/torrent.is/www/sqlerror.text", "a+");
	$date=date("l dS \of F Y h:i:s A");
	$error="<p>$date - " . mysql_error() ." í skránni $file, lína $line. Notandi: $CURUSER[username] ($CURUSER[id]). IP: $CURUSER[ip]</p><br />\r\n";
	fwrite($fp,"$error");
	if (get_user_class() >= UC_MODERATOR)
		print("<table border=0 bgcolor=blue align=left cellspacing=0 cellpadding=10 style='background: blue'>"."<tr><td class=embedded><font color=white><h1>SQL Villa</h1>\n"."<b>" . mysql_error() . ($file != '' && $line != '' ? "<p>í skránni $file, lína $line</p>" : "")."</b></font></td></tr></table>");
	die();
}

// Returns the current time in GMT in MySQL compatible format.
function get_date_time($timestamp = 0)
{
  if ($timestamp)
    return date("Y-m-d H:i:s", $timestamp);
  else
    return gmdate("Y-m-d H:i:s");
}

function encodehtml($s, $linebreaks = true)
{
  $s = str_replace("<", "&lt;", str_replace("&", "&amp;", $s));
  if ($linebreaks)
    $s = nl2br($s);
  return $s;
}

function get_dt_num()
{
  return gmdate("YmdHis");
}

function format_urls($s)
{
	return preg_replace(
    	"/(\A|[^=\]'\"a-zA-Z0-9])((http|ftp|https|ftps|irc):\/\/[^()<>\s]+)/i",
	    "\\1<a href=\"\\2\">\\2</a>", $s);
}

/*

// Removed this fn, I've decided we should drop the redir script...
// it's pretty useless since ppl can still link to pics...
// -Rb

function format_local_urls($s)
{
	return preg_replace(
    "/(<a href=redir\.php\?url=)((http|ftp|https|ftps|irc):\/\/(www\.)?torrentbits\.(net|org|com)(:8[0-3])?([^<>\s]*))>([^<]+)<\/a>/i",
    "<a href=\\2>\\8</a>", $s);
}
*/

//Finds last occurrence of needle in haystack
//in PHP5 use strripos() instead of this
function _strlastpos ($haystack, $needle, $offset = 0)
{
	$addLen = strlen ($needle);
	$endPos = $offset - $addLen;
	while (true)
	{
		if (($newPos = strpos ($haystack, $needle, $endPos + $addLen)) === false) break;
		$endPos = $newPos;
	}
	return ($endPos >= 0) ? $endPos : false;
}

function format_quotes($s)
{
	preg_match_all('/\\[quote.*?\\]/', $s, $result, PREG_PATTERN_ORDER);
	$openquotecount = count($openquote = $result[0]);
	preg_match_all('/\\[\/quote\\]/', $s, $result, PREG_PATTERN_ORDER);
	$closequotecount = count($closequote = $result[0]);

	if ($openquotecount != $closequotecount)
		return $s; // quote mismatch. Return raw string...

	// Get position of opening quotes
	$openval = array();
	$pos = '-1';

	foreach($openquote as $val)
		$openval[] = $pos = strpos($s,$val,$pos+1);

	// Get position of closing quotes
	$closeval = array();
	$pos = '-1';

	foreach($closequote as $val)
		$closeval[] = $pos = strpos($s,$val,$pos+1);


	for ($i=0; $i < count($openval); $i++)
		if ($openval[$i] > $closeval[$i])
			return $s; // Cannot close before opening. Return raw string...


	$s = str_replace("[quote]","<p class=sub><b>Quote:</b></p><table class=\"main\" border=\"1\" cellspacing=\"0\" cellpadding=\"10\"><tr><td style=\"border:1px black dotted\">",$s);
	$s = preg_replace("/\\[quote=(.+?)\\]/", "<p class=\"sub\"><b>\\1 skrifaði:</b></p><table class=\"main\" border=\"1\" cellspacing=\"0\" cellpadding=\"10\"><tr><td style=\"border: 1px black dotted\">", $s);
	$s = str_replace("[/quote]","</td></tr></table><br />",$s);
	return $s;
}

function format_comment($text, $strip_html = true)
{
	global $smilies, $privatesmilies;

	$s = $text;

	if ($strip_html)
		$s = htmlspecialchars($s);

	// Quotes
	$s = format_quotes($s);

	// [nfo]NFO-preformatted[/nfo]
	$s = preg_replace("/\[nfo\]((\s|.)+?)\[\/nfo\]/i", "<tt><nobr><font face=\"MS Linedraw\" size=\"2\" style=\"font-size: 10pt; line-height: ". "10pt\">\\1</font></nobr></tt>", $s);

	//[CODE]stuff[ /CODE]
	$s = preg_replace("/\[CODE\]\s*((\s|.)+?)\s*\[\/CODE\]\s*/i","<p class=sub><b>Kóði:</b></p><table class=\"main\" border=\"1\" cellspacing=\"0\" cellpadding=\"10\"><tr><td style=\"border: 1px black dotted\"><PRE><CODE CLASS=\"PHP\">\\1</CODE></PRE></td></tr></table><br />", $s);

	// [*]
	$s = preg_replace("/\[\*\]/", "<li>", $s);

	// [b]Bold[/b]
	$s = preg_replace("/\[b\]((\s|.)+?)\[\/b\]/", "<b>\\1</b>", $s);

	// [i]Italic[/i]
	$s = preg_replace("/\[i\]((\s|.)+?)\[\/i\]/", "<i>\\1</i>", $s);

	// [u]Underline[/u]
	$s = preg_replace("/\[u\]((\s|.)+?)\[\/u\]/", "<u>\\1</u>", $s);

	// [u]Underline[/u]
	$s = preg_replace("/\[u\]((\s|.)+?)\[\/u\]/i", "<u>\\1</u>", $s);

	// [img]http://www/image.gif[/img]
	$s = preg_replace("/\[img\](http:\/\/torrent\.is\/myndir\.php\?id=[0-9](.*))\[\/img\]/i", "<img border=\"0\" src=\"\\1\">", $s);
	$s = preg_replace("/\[img\](http:\/\/[^\s'\"<>]+(\.(jpg|gif|png)))\[\/img\]/i", "<img border=\"0\" src=\"\\1\">", $s);

	// [img=http://www/image.gif]
	$s = preg_replace("/\[img=(http:\/\/torrent\.is\/myndir\.php\?id\=[0-9](.*))]/i", "<img border=\"0\" src=\"\\1\">", $s);
	$s = preg_replace("/\[img=(http:\/\/[^\s'\"<>]+(\.(gif|jpg|png)))\]/i", "<img border=\"0\" src=\"\\1\">", $s);

	// [color=blue]Text[/color]
	$s = preg_replace(
		"/\[color=([a-zA-Z]+)\]((\s|.)+?)\[\/color\]/i",
		"<font color=\\1>\\2</font>", $s);

	// [color=#ffcc99]Text[/color]
	$s = preg_replace(
		"/\[color=(#[a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9][a-f0-9])\]((\s|.)+?)\[\/color\]/i",
		"<font color=\\1>\\2</font>", $s);

	// [url=http://www.example.com]Text[/url]
	$s = preg_replace(
		"/\[url=([^()<>\s]+?)\]((\s|.)+?)\[\/url\]/i",
		"<a href=\"\\1\">\\2</a>", $s);

	// [url]http://www.example.com[/url]
	$s = preg_replace(
		"/\[url\]([^()<>\s]+?)\[\/url\]/i",
		"<a href=\"\\1\">\\1</a>", $s);

	// [size=4]Text[/size]
	$s = preg_replace(
		"/\[size=([1-7])\]((\s|.)+?)\[\/size\]/i",
		"<font size=\\1>\\2</font>", $s);

	// [font=Arial]Text[/font]
	$s = preg_replace(
		"/\[font=([a-zA-Z ,]+)\]((\s|.)+?)\[\/font\]/i",
		"<font face=\"\\1\">\\2</font>", $s);

//  //[quote]Text[/quote]
//  $s = preg_replace(
//    "/\[quote\]\s*((\s|.)+?)\s*\[\/quote\]\s*/i",
//    "<p class=sub><b>Quote:</b></p><table class=main border=1 cellspacing=0 cellpadding=10><tr><td style='border: 1px black dotted'>\\1</td></tr></table><br />", $s);

//  //[quote=Author]Text[/quote]
//  $s = preg_replace(
//    "/\[quote=(.+?)\]\s*((\s|.)+?)\s*\[\/quote\]\s*/i",
//    "<p class=sub><b>\\1 wrote:</b></p><table class=main border=1 cellspacing=0 cellpadding=10><tr><td style='border: 1px black dotted'>\\2</td></tr></table><br />", $s);


	// URLs
	$s = format_urls($s);
//	$s = format_local_urls($s);

	// Linebreaks
	$s = nl2br($s);

	// [pre]Preformatted[/pre]
	$s = preg_replace("/\[pre\]((\s|.)+?)\[\/pre\]/i", "<tt><nobr>\\1</nobr></tt>", $s);

	// Maintain spacing
	$s = str_replace("  ", " &nbsp;", $s);

	// [hr]
	$s = str_replace ("[hr]", "<hr>", $s);

	// [center]
	$s = preg_replace("/\[center\]((\s|.)+?)\[\/center\]/i", "<div align='center'><tt><nobr><font face='Verdana' size=2 style='font-size: 10pt; line-height: " . "10pt'>\\1</font></nobr></tt></div>", $s);

	reset($smilies);
	while (list($code, $url) = each($smilies))
		$s = str_replace($code, "<img border=0 src=\"/pic/smilies/$url\" alt=\"" . htmlspecialchars($code) . "\">", $s);

	reset($privatesmilies);
	while (list($code, $url) = each($privatesmilies))
		$s = str_replace($code, "<img border=0 src=\"/pic/smilies/$url\" alt=\"" . htmlspecialchars($code) . "\">", $s);

	if (stristr("$s", '<PRE><CODE CLASS="PHP">'))
		return $s;

	return $s;
}

define ('UC_BEGINNER', 0);
define ('UC_USER', 1);
define ('UC_GOOD_USER', 2);
define ('UC_POWER_USER', 3);
#define ('UC_UPLOADER', 2);
#define ('UC_VIP', 3);
define ('UC_MODERATOR', 4);
define ('UC_ADMINISTRATOR', 5);
define ('UC_SYSOP', 6);

function get_user_class()
{
  global $CURUSER;
  return $CURUSER["class"];
}

function get_user_class_name($class)
{
  switch ($class)
  {
    case UC_BEGINNER: return "Byrjandi";

    case UC_USER: return "Notandi";

    case UC_GOOD_USER: return "Virkur notandi";

    case UC_POWER_USER: return "Mjög virkur notandi";

#    case UC_VIP: return "VIP";

#    case UC_UPLOADER: return "Deilari";

    case UC_MODERATOR: return "Stjórnandi (LVL 1)";

    case UC_ADMINISTRATOR: return "Stjórnandi (LVL 2)";

    case UC_SYSOP: return "Kerfisstjóri";
  }
  return "";
}

function is_valid_user_class($class)
{
  return is_numeric($class) && floor($class) == $class && $class >= UC_BEGINNER && $class <= UC_SYSOP;
}

function is_valid_id($id)
{
  return is_numeric($id) && ($id > 0) && (floor($id) == $id);
}


  //-------- Begins a main frame

function begin_main_frame() {
	echo '<table class="main" width="750px" border="0" cellspacing="0" cellpadding="0">'.'<tr><td class="embedded">'."\n";
}

  //-------- Ends a main frame

function end_main_frame() {
	echo '</td></tr></table>'."\n";
}

function begin_frame($caption = '', $center = false, $padding = '10') {
	if (!empty($caption))
		echo '<h2>'.$caption.'</h2>'."\n";
	if ($center)
		$tdextra = ' align="center"';
	else
		$tdextra = '';

	echo '<table width="100%" border="1" cellspacing="0" cellpadding="'.$padding.'"><tr><td'.$tdextra.'>'."\n";
}

  function attach_frame($padding = 10)
  {
    print("</td></tr><tr><td style='border-top: 0px'>\n");
  }

  function end_frame()
  {
    print("</td></tr></table>\n");
  }

  function begin_table($fullwidth = false, $padding = 5)
  {
	if ($fullwidth)
		$width = ' width="100%"';
	else
		$width = '';
    echo '<table class="main"'.$width.' border="1" cellspacing="0" cellpadding="'.$padding.'">'."\n";
  }

  function end_table()
  {
    print("</td></tr></table>\n");
  }

  //-------- Inserts a smilies frame
  //         (move to globals)

  function insert_smilies_frame()
  {
    global $smilies, $BASEURL;

    begin_frame("Smilies", true);

    begin_table(false, 5);

    print("<tr><td class=colhead>Type...</td><td class=colhead>To make a...</td></tr>\n");

    while (list($code, $url) = each($smilies))
      print("<tr><td>$code</td><td><img src=$BASEURL/pic/smilies/$url></td>\n");

    end_table();

    end_frame();
  }


function sql_timestamp_to_unix_timestamp($s)
{
  return mktime(substr($s, 11, 2), substr($s, 14, 2), substr($s, 17, 2), substr($s, 5, 2), substr($s, 8, 2), substr($s, 0, 4));
}

  function get_ratio_color($ratio)
  {
    if ($ratio < 0.1) return "#ff0000";
    if ($ratio < 0.2) return "#ee0000";
    if ($ratio < 0.3) return "#dd0000";
    if ($ratio < 0.4) return "#cc0000";
    if ($ratio < 0.5) return "#bb0000";
    if ($ratio < 0.6) return "#aa0000";
    if ($ratio < 0.7) return "#990000";
    if ($ratio < 0.8) return "#880000";
    if ($ratio < 0.9) return "#770000";
    if ($ratio < 1) return "#660000";
    return "#000000";
  }

  function get_slr_color($ratio)
  {
    if ($ratio < 0.025) return "#ff0000";
    if ($ratio < 0.05) return "#ee0000";
    if ($ratio < 0.075) return "#dd0000";
    if ($ratio < 0.1) return "#cc0000";
    if ($ratio < 0.125) return "#bb0000";
    if ($ratio < 0.15) return "#aa0000";
    if ($ratio < 0.175) return "#990000";
    if ($ratio < 0.2) return "#880000";
    if ($ratio < 0.225) return "#770000";
    if ($ratio < 0.25) return "#660000";
    if ($ratio < 0.275) return "#550000";
    if ($ratio < 0.3) return "#440000";
    if ($ratio < 0.325) return "#330000";
    if ($ratio < 0.35) return "#220000";
    if ($ratio < 0.375) return "#110000";
    return "#000000";
  }

function write_log($text)
{
  $text = sqlesc($text);
  $added = sqlesc(get_date_time());
  mysql_query("INSERT INTO sitelog (added, txt) VALUES($added, $text)") or sqlerr(__FILE__, __LINE__);
}

function get_elapsed_time($ts)
{
  $mins = floor((gmtime() - $ts) / 60);
  $hours = floor($mins / 60);
  $mins -= $hours * 60;
  $days = floor($hours / 24);
  $hours -= $days * 24;
  $weeks = floor($days / 7);
  $days -= $weeks * 7;
  $t = "";
  if ($weeks == '1')
    return $weeks.' vika';
  if ($weeks > '1')
    return $weeks.' vikur';
  if ($days == '1')
    return $days.' dagur';
  if ($days > 1)
    return $days.' dagar';
  if ($hours > 0)
    return $hours.' klst.';
  if ($mins > 0)
    return $mins.' mín';
  return "< 1 mín";
}

?>
